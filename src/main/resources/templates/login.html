<!DOCTYPE html>
<html lang="fr" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Connexion | Tableau de bord</title>
    
    <!-- Favicon -->
    <link rel="icon" type="image/png" th:href="@{/images/favicon.png}">
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@300;400;600;700&display=swap" rel="stylesheet">
    
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- AOS Animation -->
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
    
    <style>
        :root {
            --primary: #4e73df;
            --primary-dark: #2e59d9;
            --primary-light: #e3ebf7;
            --success: #1cc88a;
            --info: #36b9cc;
            --warning: #f6c23e;
            --danger: #e74a3b;
            --light: #f8f9fc;
            --dark: #5a5c69;
            --dark-blue: #2c3e50;
            --gray-100: #f8f9fc;
            --gray-200: #eaecf4;
            --gray-300: #dddfeb;
            --gray-400: #d1d3e2;
            --gray-500: #b7b9cc;
            --gray-600: #858796;
            --gray-700: #6e707e;
            --gray-800: #5a5c69;
            --gray-900: #3a3b45;
            --border-radius: 0.5rem;
            --border-radius-lg: 0.75rem;
            --shadow: 0 0.15rem 1.75rem 0 rgba(58, 59, 69, 0.15);
            --shadow-md: 0 0.5rem 1.5rem 0 rgba(58, 59, 69, 0.2);
            --transition: all 0.2s ease-in-out;
        }

        html, body {
            height: 100%;
            margin: 0;
            padding: 0;
            background: linear-gradient(135deg, #f8f9fc 0%, #e3e9f7 100%);
        }

        body {
            font-family: 'Nunito', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--gray-800);
            line-height: 1.6;
            padding: 20px;
            margin: 0;
        }

        .login-container {
            width: 100%;
            margin: 0 auto;
            border-radius: 10px;
            overflow: hidden;
        }
        
        .login-container .card {
            border: none;
            border-radius: 10px;
        }
        
        .login-container .card-header {
            border-radius: 10px 10px 0 0 !important;
        }

        .login-card {
            border: none;
            border-radius: var(--border-radius-lg);
            overflow: hidden;
            transition: var(--transition);
            background: transparent;
            margin: 0;
            width: 100%;
        }

        .login-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-md);
        }

        .card-header {
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
            padding: 2rem;
            text-align: center;
            border: none;
            position: relative;
            overflow: hidden;
        }

        .card-header::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, rgba(255,255,255,0) 70%);
            transform: rotate(30deg);
            pointer-events: none;
        }

        .card-body {
            padding: 2.5rem;
            background-color: white;
        }

        .form-control {
            height: calc(2.75rem + 2px);
            padding: 0.75rem 1rem;
            border: 1px solid var(--gray-300);
            border-radius: var(--border-radius);
            transition: var(--transition);
            font-size: 0.95rem;
        }

        .form-control:focus {
            border-color: var(--primary);
            box-shadow: 0 0 0 0.2rem rgba(78, 115, 223, 0.15);
        }

        .form-label {
            font-weight: 600;
            color: var(--gray-700);
            margin-bottom: 0.5rem;
            font-size: 0.9rem;
        }

        .form-text {
            font-size: 0.85rem;
            color: var(--gray-600);
        }

        .btn {
            padding: 0.75rem 1.5rem;
            font-weight: 600;
            border-radius: var(--border-radius);
            transition: var(--transition);
            letter-spacing: 0.5px;
            font-size: 0.95rem;
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
            border: none;
            position: relative;
            overflow: hidden;
            z-index: 1;
        }

        .btn-primary::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 0;
            height: 100%;
            background: linear-gradient(135deg, var(--primary-dark) 0%, var(--primary) 100%);
            transition: var(--transition);
            z-index: -1;
        }

        .btn-primary:hover::before {
            width: 100%;
        }

        .btn-block {
            display: block;
            width: 100%;
        }

        .form-text a {
            color: var(--primary);
            text-decoration: none;
            font-weight: 600;
            transition: var(--transition);
        }

        .form-text a:hover {
            color: var(--primary-dark);
            text-decoration: none;
        }

        .divider {
            display: flex;
            align-items: center;
            text-align: center;
            margin: 1.5rem 0;
            color: var(--gray-500);
            font-size: 0.85rem;
            font-weight: 500;
        }

        .divider::before,
        .divider::after {
            content: '';
            flex: 1;
            border-bottom: 1px solid var(--gray-200);
        }

        .divider::before {
            margin-right: 1rem;
        }

        .divider::after {
            margin-left: 1rem;
        }

        /* Custom checkbox */
        .form-check-input:checked {
            background-color: var(--primary);
            border-color: var(--primary);
        }

        .form-check-input:focus {
            box-shadow: 0 0 0 0.2rem rgba(78, 115, 223, 0.25);
            border-color: var(--primary);
        }

        /* Logo styles */
        .logo {
            display: inline-block;
            margin-bottom: 1.5rem;
            transition: var(--transition);
        }

        .logo img {
            height: 50px;
            width: auto;
        }

        /* Footer */
        .login-footer {
            text-align: center;
            margin-top: 2rem;
            color: var(--gray-600);
            font-size: 0.85rem;
        }

        /* Responsive adjustments */
        @media (max-width: 575.98px) {
            .card-body {
                padding: 1.5rem;
            }
            
            .card-header {
                padding: 1.5rem;
            }
            
            .login-container {
                padding: 0 1rem;
            }
        }

        /* Animation */
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .animate-fade-in-up {
            animation: fadeInUp 0.6s ease-out forwards;
        }
    </style>
</head>
<body>
    <div class="d-flex justify-content-center align-items-center min-vh-100 bg-light p-3">
        <div class="login-container w-100" data-aos="fade-up" data-aos-duration="800" style="max-width: 500px;">
            <div class="card border-0 shadow">
                <div class="card-header bg-primary text-white text-center py-4">
                    <div class="logo">
                        <!-- SVG Logo ici -->
                        <svg width="120" height="40" viewBox="0 0 200 60" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M30 10L50 40L70 10H85L55 55H45L15 10H30Z" fill="white"/>
                            <path d="M95 40C95 32.8203 100.82 27 108 27C115.18 27 121 32.8203 121 40C121 47.1797 115.18 53 108 53C100.82 53 95 47.1797 95 40ZM118 40C118 34.4772 113.523 30 108 30C102.477 30 98 34.4772 98 40C98 45.5228 102.477 50 108 50C113.523 50 118 45.5228 118 40Z" fill="white"/>
                            <path d="M130 27H145V30H133V37H143V40H133V50H130V27Z" fill="white"/>
                            <path d="M150 27H165V30H153V37H163V40H153V50H150V27Z" fill="white"/>
                            <path d="M170 27H185V30H173V37H183V40H173V50H170V27Z" fill="white"/>
                        </svg>
                    </div>
                    <h3 class="mb-2 fw-bold">Bienvenue !</h3>
                    <p class="mb-0 opacity-75">Connectez-vous pour accéder à votre tableau de bord</p>
                </div>

                <div class="card-body p-5">
                    <div class="text-center mb-4">
                        <h4 class="fw-bold">Connexion à votre compte</h4>
                        <p class="text-muted">Entrez vos identifiants pour vous connecter</p>
                    </div>
                    <form th:action="@{/auth/login}" method="post" th:object="${loginRequest}" class="animate-fade-in-up" style="animation-delay: 0.2s">
                        <input type="hidden" name="_csrf" th:value="${_csrf.token}" />
                        <input type="hidden" name="redirect" th:value="${param.redirect}" />
                        
                        <div class="mb-4">
                            <label for="email" class="form-label">Adresse email</label>
                            <div class="input-group">
                                <span class="input-group-text bg-white">
                                    <i class="fas fa-envelope text-primary"></i>
                                </span>
                                <input type="email" class="form-control" id="email" name="email" th:field="*{email}" required autofocus placeholder="votre@email.com">
                            </div>
                            <div class="invalid-feedback" th:if="${#fields.hasErrors('email')}" th:errors="*{email}">
                                Veuillez fournir une adresse email valide
                            </div>
                        </div>

                        <div class="d-grid gap-2 mb-4">
                            <button type="submit" class="btn btn-primary btn-lg py-2">
                                <i class="fas fa-sign-in-alt me-2"></i> Se connecter
                            </button>
                        </div>

                        <div th:if="${error}" class="alert alert-danger alert-dismissible fade show" role="alert">
                            <i class="fas fa-exclamation-circle me-2"></i>
                            <span th:text="${error}">Erreur de connexion</span>
                            <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                        </div>

                        <div th:if="${param.logout}" class="alert alert-success alert-dismissible fade show" role="alert">
                            <i class="fas fa-check-circle me-2"></i> Vous avez été déconnecté avec succès
                            <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                        </div>

                        <div class="text-center mt-4">
                            <p class="mb-0">Vous n'avez pas de compte ? 
                                <a th:href="@{/auth/register}" class="text-decoration-none fw-semibold">
                                    <i class="fas fa-user-plus me-1"></i>Créer un compte
                                </a>
                            </p>
                        </div>
                    </form>
                </div>
            </div>

            <div class="login-footer mt-4 text-center">
                <p class="mb-1">&copy; 2025 Tableau de bord. Tous droits réservés.</p>
                <p class="mb-0">
                    <a href="#" class="text-decoration-none me-3">Confidentialité</a>
                    <a href="#" class="text-decoration-none me-3">Conditions</a>
                    <a href="#" class="text-decoration-none">Aide</a>
                </p>
            </div>
        </div>
    </div>

    <!-- Bootstrap JS Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    
    <!-- AOS Animation -->
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    
    <script>
        // Initialize AOS
        AOS.init({
            once: true,
            duration: 800,
            easing: 'ease-out-cubic'
        });
        
        // Validation du formulaire de connexion
        document.querySelector('form').addEventListener('submit', function(event) {
            const emailInput = document.getElementById('email');
            if (!emailInput.value) {
                event.preventDefault();
                emailInput.classList.add('is-invalid');
                const errorDiv = document.createElement('div');
                errorDiv.className = 'invalid-feedback';
                errorDiv.textContent = 'Veuillez entrer votre adresse email';
                emailInput.parentNode.appendChild(errorDiv);
            }
        });
    </script>
</body>
</html>